syntax = "proto3";

package v1.helloworld;

import "google/api/annotations.proto";
import "openapi/v3/annotations.proto";
import "google/protobuf/descriptor.proto";
import "google/protobuf/timestamp.proto";


option go_package = "./;v1";
option java_multiple_files = true;
option java_package = "dev.kratos.api.v1.helloworld";
option java_outer_classname = "HelloworldProtoV1";


option (openapi.v3.document) = {
  info: {
    title: "实例API"
    version: "1.0.0"
    description: "A simple greeting service API"
  }
};



// The greeting service definition.
service Greeter {



  // Sends a greeting
  rpc SayHello (HelloRequest) returns (HelloReply) {
    option (google.api.http) = {
      get: "/api/v1/greeter/helloworld/{name}"
    };
    option (openapi.v3.operation) = {
      summary: "Say hello to a user"
    };

  }

  // Sends a greeting
  rpc AddUser (AddUserRequest) returns (AddUserResponse) {
    option (google.api.http) = {
      post: "/api/v1/greeter/AddUser"
      body: "*"

    };
    option (openapi.v3.operation) = {
      summary: "添加一个新用户"
      description:"Add new User"
    };

  }
}

// The request message containing the user's name.
message HelloRequest {
  option (openapi.v3.schema) = {
    title: "Hello Request"
    description: "Request message for saying hello"
    required: ["name"]
  };
  string name = 1 [(openapi.v3.property) = {
    title: "Name"
    description: "The name of the person to greet"
    min_length: 1
    max_length: 100
  }];
}

// The request message is add new User
message AddUserRequest {
  option (openapi.v3.schema) = {
    title: "Hello World Request"
    description: "Request message for saying hello"
    required: ["name"]
  };
  string username = 1 [(openapi.v3.property) = {
    title: "username"
    description: "The username of the person to greet"
    min_length: 1
    max_length: 100
    nullable: false
  }];

  optional uint32 age = 2 [(openapi.v3.property) = {
    title: "age"
    description: "The age of the person to greet"
    nullable: true
  }];
  uint32 order = 3 [(openapi.v3.property) = {
    title: "order"
    description: "The order of the person to greet"
    nullable: false
    max_properties: 100
    min_properties: 0
  }];

  repeated string hobby = 4 [(openapi.v3.property) = {
    title: "hobby"
    description: "The hobby of the person to greet"
    nullable: false
    min_items: 1
    max_items: 10
  }];

  google.protobuf.Timestamp birthday = 5[(openapi.v3.property) = {
    title: "birthday"
    description: "The birthday of the person to greet"
    nullable: false
    format: "date-time"
    pattern: "^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$"
    example: {
      value: {
        type_url: "google.protobuf.StringValue"
        value: "2023-12-25 10:30:00"
      }
    }
  }];

}


// The request message is add new User
message AddUserResponse {
  option (openapi.v3.schema) = {
    title: "返回用户ID"
    description: "Request message for saying hello"
    required: ["name"]
  };
  string id = 1 [(openapi.v3.property) = {
    title: "用户ID"
    description: "用户ID"
  }];


}

// The response message containing the greetings
message HelloReply {
  option (openapi.v3.schema) = {
    title: "Hello Reply"
    description: "Response message containing the greeting"
  };
  string message = 1 [(openapi.v3.property) = {
    title: "Message"
    description: "The greeting message"
  }];
}
